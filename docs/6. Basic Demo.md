# Full Example: JAnimation in Action

This page demonstrates how to use **Animatable**, **AnimationLoader**, **AnimationController**, and **Animator** together in a simple game loop.  

---
## Demo Code

```java
// Player implementing Animatable
class Player implements Animatable
{
    private float x, y;

    public Player(float x, float y)
    {
        this.x = x;
        this.y = y;
    }

    public void move(float dx, float dy)
    {
        this.x += dx;
        this.y += dy;
    }

    @Override
    public float getX() { return x; }

    @Override
    public float getY() { return y; }

    @Override
    public void drawFrame(
	    Graphics2D g, 
	    BufferedImage frame, 
	    int x, int y, 
	    int width, int height)
    {
        g.drawImage(frame, x, y, width, height, null);
    }
}
```

```java
import java.awt.*;
import java.awt.image.BufferedImage;
import java.awt.image.BufferStrategy;
import javax.swing.*;
import java.util.Map;

public class BasicAnimationDemo extends Canvas implements Runnable
{
    private boolean running = true;

    private Player player;
    private Animator animator;
    private AnimationController animationController;

    public BasicAnimationDemo()
    {
        // Create player at (100, 100)
        player = new Player(100, 100);

        // Load player animations
        Map<String, String[]> playerAnimationPaths = Map.of(
            "Idle", new String[]{
                "assets/player/idle/player_idle_01.png",
                "assets/player/idle/player_idle_02.png",
                "assets/player/idle/player_idle_03.png"
            },
            "Walk", new String[]{
                "assets/player/walk/player_walk_01.png",
                "assets/player/walk/player_walk_02.png",
                "assets/player/walk/player_walk_03.png"
            }
        );

        Map<String, BufferedImage[]> animations =
            AnimationLoader.loadNamedAnimations(playerAnimationPaths);

        // Create animation controller
        playerAnimationController = new AnimationController(player, animations);

        // Start with idle animation
        playerAnimationController.play("Idle");

        // Create animator
        Animator playerAnimator = new Animator();
        playerAnimator.setFrameDuration(300); // 300ms per frame
    }

    @Override
    public void run()
    {
        while (running)
        {
            update();
            render();

            try { Thread.sleep(16); } catch (InterruptedException e) {}
        }
    }

    private void update()
    {
        // Simulate player movement
        if (Math.random() > 0.98) // randomly move
        {
            player.move(5, 0);
            playerAnimationController.play("Walk");
        }
        else
        {
            playerAnimationController.play("Idle");
        }
    }

    private void render()
    {
        BufferStrategy bs = getBufferStrategy();
        if (bs == null)
        {
            createBufferStrategy(2);
            return;
        }

        Graphics2D g = (Graphics2D) bs.getDrawGraphics();

        // Clear background
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, getWidth(), getHeight());

        // Draw current animation
        BufferedImage[] currentFrames = animationController.getCurrentAnimation();
        playerAnimator.animate(currentFrames, true, player, g, 0, 0, 64);

        g.dispose();
        bs.show();
    }

    public static void main(String[] args)
    {
        JFrame frame = new JFrame("JAnimation Demo");
        BasicAnimationDemo demo = new BasicAnimationDemo();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(demo);
        frame.pack();
        frame.setSize(new Dimension(640, 480));
        frame.setVisible(true);

        new Thread(demo).start();
    }
}
```

---
## What This Demo Shows

1. A `Player` implements **Animatable** so the animation system can draw it.
2. **AnimationLoader** loads idle and walking animations.
3. **AnimationController** switches between idle and walk based on movement.
4. **Animator** handles frame timing and drawing inside the render loop.
5. A simple loop simulates movement and shows how animations update.
